<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>BeagleY-AI + Thistle OTA Updates - Professional Codelab</title>

  <!-- Reveal.js Core -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.css">
  <link rel="stylesheet" href="../../framework/thistle-theme.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css">
</head>

<body>
  <div class="reveal">
    <div class="slides">

      <!-- Title Slide -->
      <section class="title-slide">
        <h1>BeagleY-AI + Thistle OTA</h1>
        <p class="subtitle">Professional Over-The-Air Updates Workshop</p>

        <div class="logos">
          <span class="logo">BeagleBoard.org</span>
          <span class="logo">Thistle Technologies</span>
        </div>

        <div class="alert alert-info" style="max-width: 700px; margin: 2rem auto;">
          <strong>Learning Objective:</strong> Deploy cryptographically signed software updates wirelessly to embedded Linux hardware using modern security practices and professional tools.
        </div>

        <p style="margin-top: 2rem; font-size: 1rem; color: var(--text-muted);">
          <strong>Resources:</strong> docs.thistle.tech • docs.beagleboard.org<br>
          <strong>Duration:</strong> 90 minutes • <strong>Level:</strong> Beginner to Intermediate
        </p>
      </section>

      <!-- Learning Outcomes -->
      <section>
        <h2>Learning Outcomes</h2>
        <p class="lead">By the end of this workshop, you will:</p>

        <div class="grid grid-2">
          <div class="card">
            <h3><span class="icon icon-security"></span>Security Implementation</h3>
            <ul>
              <li>Understand cryptographic signing for updates</li>
              <li>Implement device authentication</li>
              <li>Configure secure update verification</li>
            </ul>
          </div>
          <div class="card">
            <h3><span class="icon icon-hardware"></span>Hardware Integration</h3>
            <ul>
              <li>Flash and configure BeagleY-AI</li>
              <li>Establish reliable network connectivity</li>
              <li>Control GPIO hardware via OTA</li>
            </ul>
          </div>
        </div>

        <div class="grid grid-2">
          <div class="card">
            <h3><span class="icon icon-code"></span>Development Workflow</h3>
            <ul>
              <li>Package and sign software releases</li>
              <li>Deploy updates via cloud infrastructure</li>
              <li>Verify successful installation</li>
            </ul>
          </div>
          <div class="card">
            <h3><span class="icon icon-check"></span>Production Readiness</h3>
            <ul>
              <li>Understand rollback mechanisms</li>
              <li>Implement CI/CD integration patterns</li>
              <li>Scale to fleet management</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Why OTA Updates Matter -->
      <section>
        <section>
          <h2>Why OTA Updates Matter</h2>
          <p class="lead">The critical importance of secure device management</p>

          <div class="grid grid-3">
            <div class="card">
              <h3>The Problem</h3>
              <p>60% of IoT devices never receive security updates after deployment</p>
              <span class="badge badge-error">Critical Risk</span>
            </div>
            <div class="card">
              <h3>The Impact</h3>
              <p>Unpatched devices contribute to billions in security breaches annually</p>
              <span class="badge badge-warning">Business Cost</span>
            </div>
            <div class="card">
              <h3>The Solution</h3>
              <p>Automated, secure OTA updates like modern smartphones</p>
              <span class="badge badge-success">Modern Standard</span>
            </div>
          </div>
        </section>

        <section>
          <h3>Industry Statistics</h3>
          <div class="grid grid-2">
            <div class="card">
              <h4>Security Vulnerabilities</h4>
              <ul>
                <li>85% of IoT devices have known vulnerabilities</li>
                <li>Average time to patch: 205 days</li>
                <li>Cost of breach: $4.45M average</li>
              </ul>
            </div>
            <div class="card">
              <h4>Update Success Rates</h4>
              <ul>
                <li>Traditional methods: 23% success rate</li>
                <li>OTA updates: 94% success rate</li>
                <li>Downtime reduction: 80%</li>
              </ul>
            </div>
          </div>
        </section>
      </section>

      <!-- File Update vs Secure Boot -->
      <section>
        <section>
          <h2>Update Strategies Comparison</h2>
          <p class="lead">Understanding your options for secure updates</p>

          <div class="grid grid-2">
            <div class="card">
              <h3>File Updates <span class="status status-recommended">Today's Focus</span></h3>
              <h4>What It Does</h4>
              <ul>
                <li>Updates specific files and scripts</li>
                <li>Preserves existing system state</li>
                <li>Fast deployment and rollback</li>
              </ul>
              <h4>Security Features</h4>
              <ul>
                <li>Cryptographically signed manifests</li>
                <li>Atomic file operations</li>
                <li>Verification before installation</li>
              </ul>
            </div>

            <div class="card">
              <h3>Secure Boot OTA <span class="status status-optional">Advanced</span></h3>
              <h4>What It Does</h4>
              <ul>
                <li>Complete system image updates</li>
                <li>A/B partition switching</li>
                <li>Full rollback capability</li>
              </ul>
              <h4>Security Features</h4>
              <ul>
                <li>Hardware-verified boot chain</li>
                <li>Tamper-resistant storage</li>
                <li>Zero-trust architecture</li>
              </ul>
            </div>
          </div>
        </section>

        <section>
          <h3>Security Model Comparison</h3>
          <div class="alert alert-info">
            <strong>Key Insight:</strong> Both methods use the same core security principles - cryptographic signing, verification, and atomic operations. Secure Boot extends the trust chain deeper into the hardware.
          </div>

          <div class="grid grid-2">
            <div class="card">
              <h4>File Update Security Chain</h4>
              <div class="steps">
                <div class="step">Developer signs manifest with private key</div>
                <div class="step">Device downloads and verifies signature</div>
                <div class="step">Files installed atomically</div>
                <div class="step">Rollback on failure</div>
              </div>
            </div>
            <div class="card">
              <h4>Secure Boot Security Chain</h4>
              <div class="steps">
                <div class="step">Hardware verifies bootloader signature</div>
                <div class="step">Bootloader verifies kernel signature</div>
                <div class="step">Kernel verifies application signatures</div>
                <div class="step">Full system rollback on failure</div>
              </div>
            </div>
          </div>
        </section>
      </section>

      <!-- Prerequisites -->
      <section>
        <section>
          <h2>Prerequisites</h2>
          <p class="lead">Required hardware, software, and accounts</p>

          <div class="grid grid-2">
            <div class="card">
              <h3><span class="icon icon-hardware"></span>Required Hardware</h3>
              <div class="steps">
                <div class="step">BeagleY-AI single board computer</div>
                <div class="step">32GB+ microSD card (Class 10 or better)</div>
                <div class="step">USB-C cable with data capability</div>
                <div class="step">Host computer with internet access</div>
              </div>
            </div>

            <div class="card">
              <h3><span class="icon icon-hardware"></span>Optional Hardware</h3>
              <div class="steps">
                <div class="step">LED (any color, 3mm or 5mm)</div>
                <div class="step">Current limiting resistor (220Ω - 2.2kΩ)</div>
                <div class="step">Breadboard and jumper wires</div>
                <div class="step">Ethernet cable (for stable connectivity)</div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h3>Software and Account Setup</h3>

          <div class="card">
            <h4><span class="icon icon-network"></span>Thistle Account Setup <span class="status status-required">Required</span></h4>
            <div class="steps">
              <div class="step">Visit <strong>app.thistle.tech</strong> and create free account</div>
              <div class="step">Create new project for this workshop</div>
              <div class="step">Generate and copy Project Access Token</div>
              <div class="step">Keep token secure - treat like a password</div>
            </div>
          </div>

          <div class="card">
            <h4><span class="icon icon-code"></span>Software Requirements</h4>
            <ul>
              <li><strong>bb-imager v1.0.0+</strong> - BeagleBoard imaging utility</li>
              <li><strong>SSH client</strong> - Built into macOS/Linux, PuTTY for Windows</li>
              <li><strong>Terminal/Command Line</strong> - For running update tools</li>
              <li><strong>Text Editor</strong> - For reviewing configurations</li>
            </ul>
          </div>
        </section>
      </section>

      <!-- Step 1: Flash BeagleY-AI -->
      <section>
        <section>
          <h2>Step 1: Flash BeagleY-AI</h2>
          <p class="lead">Create bootable SD card with headless configuration</p>

          <div class="alert alert-info">
            <strong>Objective:</strong> Flash the BeagleY-AI with a Debian-based image and pre-configure SSH access for headless operation.
          </div>

          <div class="card">
            <h3>Download BeagleBoard Imager</h3>
            <p>Download from <strong>beagleboard.org/distros</strong></p>
            <ul>
              <li><strong>Windows:</strong> .exe installer</li>
              <li><strong>macOS:</strong> .dmg package</li>
              <li><strong>Linux:</strong> .AppImage executable</li>
            </ul>
          </div>
        </section>

        <section>
          <h3>Imaging Process</h3>

          <div class="grid grid-2">
            <div class="card">
              <h4>Device Selection</h4>
              <div class="steps">
                <div class="step">Launch bb-imager application</div>
                <div class="step">Choose Device: <strong>BeagleY-AI</strong></div>
                <div class="step">Choose OS: <strong>Debian 12 XFCE</strong></div>
                <div class="step">Select your microSD card as storage</div>
              </div>
            </div>

            <div class="card">
              <h4>OS Customization <span class="status status-required">Critical</span></h4>
              <div class="steps">
                <div class="step">Click Settings gear icon</div>
                <div class="step">Enable SSH with password authentication</div>
                <div class="step">Set username: <code>debian</code></div>
                <div class="step">Set strong password</div>
                <div class="step">Set hostname: <code>beagley-ota</code></div>
                <div class="step">Configure WiFi (optional)</div>
              </div>
            </div>
          </div>

          <div class="alert alert-warning">
            <strong>Important:</strong> Pre-configuring SSH and networking saves significant setup time and ensures immediate connectivity after first boot.
          </div>
        </section>

        <section>
          <h3>Write and Verify</h3>

          <div class="card">
            <h4>Flashing Process</h4>
            <p>Click <strong>Write</strong> to begin the imaging process</p>
            <ul>
              <li>Expected duration: 10-15 minutes</li>
              <li>Verification included automatically</li>
              <li>Safe removal when complete</li>
            </ul>
          </div>

          <div class="alert alert-success">
            <strong>Pro Tip:</strong> The pre-configuration eliminates manual setup steps. SSH and networking will be functional immediately after first boot.
          </div>
        </section>
      </section>

      <!-- Step 2: Connect -->
      <section>
        <section>
          <h2>Step 2: Connect to BeagleY-AI</h2>
          <p class="lead">Establish reliable SSH connection</p>

          <div class="card">
            <h3>First Boot Sequence</h3>
            <div class="steps">
              <div class="step">Insert microSD card into BeagleY-AI</div>
              <div class="step">Connect USB-C power (or to computer)</div>
              <div class="step">Wait 60-90 seconds for complete boot</div>
              <div class="step">Observe status LEDs for boot completion</div>
            </div>
          </div>
        </section>

        <section>
          <h3>Connection Methods</h3>

          <div class="grid grid-3">
            <div class="card">
              <h4>USB Networking <span class="status status-recommended">Easiest</span></h4>
              <pre><code class="language-bash"># Linux/macOS
ssh debian@192.168.7.2

# Windows
ssh debian@192.168.6.2</code></pre>
            </div>

            <div class="card">
              <h4>mDNS Resolution</h4>
              <pre><code class="language-bash">ssh debian@beagley-ota.local

# Use password you configured</code></pre>
            </div>

            <div class="card">
              <h4>Direct IP Address</h4>
              <pre><code class="language-bash">ssh debian@[IP-ADDRESS]

# Find IP in router interface
# or use network scanner</code></pre>
            </div>
          </div>
        </section>

        <section>
          <h3>Verify System</h3>

          <div class="card">
            <h4>System Verification Commands</h4>
            <pre><code class="language-bash"># Check system information
uname -a

# Verify network connectivity
ping -c 2 google.com

# Check available storage
df -h

# Verify GPIO tools
which gpioset gpiofind</code></pre>
          </div>

          <div class="alert alert-success">
            <strong>Success Criteria:</strong> All commands execute successfully, showing Linux kernel version, network connectivity, adequate storage, and GPIO utilities present.
          </div>
        </section>
      </section>

      <!-- Step 3: Install Tools -->
      <section>
        <section>
          <h2>Step 3: Install Thistle Tools</h2>
          <p class="lead">Deploy TRH on workstation and TUC on device</p>

          <div class="alert alert-info">
            <strong>Architecture Note:</strong> TRH (Thistle Release Helper) runs on your development machine to package and sign updates. TUC (Thistle Update Client) runs on the BeagleY-AI to receive and apply updates.
          </div>
        </section>

        <section>
          <h3>Install TRH (Workstation)</h3>

          <div class="card">
            <h4>Download and Install Release Helper</h4>
            <pre><code class="language-bash"># Set version variable
VER=1.6.0

# Download for your platform
# Linux x86_64:
curl -LO "https://downloads.thistle.tech/embedded-client/$VER/trh-$VER-x86_64-unknown-linux-musl.gz"

# macOS (Apple Silicon):
curl -LO "https://downloads.thistle.tech/embedded-client/$VER/trh-$VER-aarch64-apple-darwin.gz"

# macOS (Intel):
curl -LO "https://downloads.thistle.tech/embedded-client/$VER/trh-$VER-x86_64-apple-darwin.gz"</code></pre>
          </div>
        </section>

        <section>
          <h3>Complete TRH Installation</h3>

          <div class="card">
            <h4>Extract and Make Executable</h4>
            <pre><code class="language-bash"># Extract and set permissions
gunzip trh-*.gz
chmod +x trh-*

# Move to system PATH (optional)
sudo mv trh-* /usr/local/bin/trh

# Verify installation
trh --help</code></pre>
          </div>

          <div class="alert alert-success">
            <strong>Expected Output:</strong> Help text showing available commands including <code>init</code>, <code>prepare</code>, <code>release</code>, and <code>gen-device-config</code>.
          </div>
        </section>

        <section>
          <h3>Install TUC (BeagleY-AI)</h3>

          <div class="card">
            <h4>SSH to Device and Install Update Client</h4>
            <pre><code class="language-bash"># On BeagleY-AI via SSH
VER=1.6.0
curl -LO "https://downloads.thistle.tech/embedded-client/$VER/tuc-$VER-aarch64-unknown-linux-musl.gz"

# Extract and install system-wide
gunzip tuc-*.gz
chmod +x tuc-*
sudo mv tuc-* /usr/local/bin/tuc

# Verify installation
tuc --help | head -n 3</code></pre>
          </div>

          <div class="alert alert-info">
            <strong>Note:</strong> ARM64 (aarch64) binary is required for BeagleY-AI. The system-wide installation in <code>/usr/local/bin</code> ensures availability from any location.
          </div>
        </section>
      </section>

      <!-- Step 4: Initialize Project -->
      <section>
        <section>
          <h2>Step 4: Initialize Project</h2>
          <p class="lead">Configure signing keys and device enrollment</p>

          <div class="alert alert-warning">
            <strong>Security Note:</strong> Your Thistle API token provides access to your project. Treat it like a password and never commit it to version control.
          </div>
        </section>

        <section>
          <h3>Workstation Configuration</h3>

          <div class="card">
            <h4>Environment Setup</h4>
            <pre><code class="language-bash"># Set API token - replace with your actual token
export THISTLE_TOKEN="tht_proj_xxxxxxxxxxxxxx"

# Create working directory
mkdir ~/beagley-demo
cd ~/beagley-demo

# Initialize Thistle project with remote signing
trh --signing-method="remote" init</code></pre>
          </div>

          <div class="card">
            <h4>Generated Files</h4>
            <ul>
              <li><strong>config.json</strong> - Device enrollment configuration</li>
              <li><strong>manifest.json</strong> - Update package template</li>
            </ul>
            <p>Remote signing eliminates the need for local private keys, improving security.</p>
          </div>
        </section>

        <section>
          <h3>Device Configuration</h3>

          <div class="card">
            <h4>Generate Device-Specific Config</h4>
            <pre><code class="language-bash"># Generate device configuration
trh --signing-method="remote" gen-device-config \
  --device-name="beagley-demo" \
  --enrollment-type="group-enroll" \
  --persist="/boot"</code></pre>
          </div>

          <div class="alert alert-info">
            <strong>Parameter Explanation:</strong>
            <ul>
              <li><strong>device-name:</strong> Unique identifier for this device</li>
              <li><strong>group-enroll:</strong> Automatic enrollment on first connection</li>
              <li><strong>persist:</strong> Directory for storing update state</li>
            </ul>
          </div>
        </section>

        <section>
          <h3>Deploy Configuration</h3>

          <div class="card">
            <h4>Copy Configuration to Device</h4>
            <pre><code class="language-bash"># Copy configuration file to device
scp config.json debian@beagley-ota.local:/tmp/

# SSH to device and move to persistent location
ssh debian@beagley-ota.local
sudo mv /tmp/config.json /boot/tuc-config.json

# Verify file placement
ls -l /boot/tuc-config.json</code></pre>
          </div>

          <div class="alert alert-success">
            <strong>Success Criteria:</strong> Configuration file successfully copied and accessible at <code>/boot/tuc-config.json</code> on the BeagleY-AI.
          </div>
        </section>
      </section>

      <!-- Step 5: Create Update -->
      <section>
        <section>
          <h2>Step 5: Create Update Script</h2>
          <p class="lead">Develop LED blink demonstration</p>

          <div class="alert alert-info">
            <strong>Hardware Setup (Optional):</strong> Connect LED positive terminal to GPIO14 (Pin 8), negative terminal through resistor to GND (Pin 6). Script includes fallback for systems without hardware.
          </div>
        </section>

        <section>
          <h3>Create Update Content</h3>

          <div class="card">
            <h4>Prepare Directory Structure</h4>
            <pre><code class="language-bash"># Create directory for update files
mkdir -p ~/beagley-demo/files</code></pre>
          </div>
        </section>

        <section>
          <h3>Develop Blink Script</h3>

          <div class="card">
            <h4>LED Control Script with Fallback</h4>
            <pre><code class="language-bash">cat > ~/beagley-demo/files/blink.sh << 'EOF'
#!/bin/bash
# Professional LED blink script with hardware detection
set -euo pipefail

echo "OTA Update Applied Successfully - Version 1.0"
echo "LED Control Script Starting..."
echo "Press Ctrl+C to stop"

# Check for GPIO tools and hardware
if command -v gpioset >/dev/null 2>&1; then
    GPIO_CHIP="gpiochip0"
    GPIO_PIN="14"

    # Test GPIO access
    if gpioset $GPIO_CHIP $GPIO_PIN=0 2>/dev/null; then
        echo "Hardware GPIO detected - LED will blink"
        trap 'gpioset $GPIO_CHIP $GPIO_PIN=0' EXIT

        while true; do
            gpioset $GPIO_CHIP $GPIO_PIN=1  # LED ON
            sleep 0.5
            gpioset $GPIO_CHIP $GPIO_PIN=0  # LED OFF
            sleep 0.5
        done
    else
        echo "GPIO access denied or hardware not found"
        echo "Running simulation mode..."
    fi
else
    echo "GPIO tools not available - simulation mode"
fi

# Fallback simulation
while true; do
    echo "LED: ON"
    sleep 0.5
    echo "LED: OFF"
    sleep 0.5
done
EOF

chmod +x ~/beagley-demo/files/blink.sh</code></pre>
          </div>
        </section>
      </section>

      <!-- Step 6: Package and Release -->
      <section>
        <section>
          <h2>Step 6: Sign and Release Update</h2>
          <p class="lead">Package files and deploy to cloud</p>

          <div class="alert alert-info">
            <strong>Process Overview:</strong> Thistle will compress files, generate checksums, create a signed manifest, and upload everything to secure cloud storage for distribution.
          </div>
        </section>

        <section>
          <h3>Package Update</h3>

          <div class="card">
            <h4>Prepare Signed Manifest</h4>
            <pre><code class="language-bash"># Navigate to project directory
cd ~/beagley-demo

# Package files with target installation path
trh --signing-method="remote" prepare \
  --target=./files \
  --file-base-path=/opt/demo</code></pre>
          </div>

          <div class="alert alert-info">
            <strong>Parameter Explanation:</strong>
            <ul>
              <li><strong>target:</strong> Local directory containing files to package</li>
              <li><strong>file-base-path:</strong> Installation path on target device</li>
            </ul>
          </div>
        </section>

        <section>
          <h3>Deploy to Cloud</h3>

          <div class="card">
            <h4>Upload Release</h4>
            <pre><code class="language-bash"># Upload to Thistle cloud infrastructure
trh --signing-method="remote" release</code></pre>
          </div>

          <div class="alert alert-success">
            <strong>Expected Output:</strong>
            <pre><code>Uploading manifest...
Uploading file bundle...
Release successful! Version: 1
Update available to enrolled devices</code></pre>
          </div>

          <div class="card">
            <h4>Security Features Applied</h4>
            <ul>
              <li>Files compressed with industry-standard zstd</li>
              <li>SHA256 checksums calculated for integrity</li>
              <li>Manifest cryptographically signed</li>
              <li>Distributed via secure CDN infrastructure</li>
            </ul>
          </div>
        </section>
      </section>

      <!-- Step 7: Deploy -->
      <section>
        <section>
          <h2>Step 7: Deploy to Device</h2>
          <p class="lead">Execute secure update process</p>

          <div class="alert alert-info">
            <strong>Process Overview:</strong> TUC will enroll the device, verify signatures, download files, and install them atomically with automatic rollback on failure.
          </div>
        </section>

        <section>
          <h3>Execute Update Client</h3>

          <div class="card">
            <h4>Run Thistle Update Client</h4>
            <pre><code class="language-bash"># On BeagleY-AI via SSH
sudo tuc -c /boot/tuc-config.json</code></pre>
          </div>

          <div class="alert alert-success">
            <strong>Expected Process Flow:</strong>
            <pre><code>[INFO] Device enrollment starting...
[INFO] Trust-on-first-use authentication
[INFO] Checking for available updates...
[INFO] Update found: Version 1
[INFO] Downloading manifest...
[INFO] Verifying cryptographic signature... ✓
[INFO] Downloading file bundle...
[INFO] Verifying file integrity...
[INFO] Installing to /opt/demo/ ...
[SUCCESS] Update applied successfully</code></pre>
          </div>
        </section>

        <section>
          <h3>Verify Installation</h3>

          <div class="card">
            <h4>Test Update Deployment</h4>
            <pre><code class="language-bash"># Verify file installation
ls -la /opt/demo/

# Check file permissions
ls -l /opt/demo/blink.sh

# Execute the update
sudo bash /opt/demo/blink.sh</code></pre>
          </div>

          <div class="alert alert-success">
            <strong>Success Indicators:</strong>
            <ul>
              <li>Script file present with execute permissions</li>
              <li>LED blinks if hardware connected</li>
              <li>Simulation output if no hardware</li>
              <li>No error messages during execution</li>
            </ul>
          </div>
        </section>
      </section>

      <!-- Production Considerations -->
      <section>
        <section>
          <h2>Production Deployment</h2>
          <p class="lead">Scaling to enterprise environments</p>

          <div class="grid grid-2">
            <div class="card">
              <h3>CI/CD Integration</h3>
              <pre><code class="language-yaml"># GitHub Actions Example
name: Deploy OTA Update
on:
  push:
    tags: ['v*']

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Deploy Update
        env:
          THISTLE_TOKEN: ${{ secrets.THISTLE_TOKEN }}
        run: |
          trh --signing-method="remote" prepare \
            --target=./release
          trh --signing-method="remote" release</code></pre>
            </div>

            <div class="card">
              <h3>Fleet Management Features</h3>
              <ul>
                <li><strong>Device Groups:</strong> Staged rollout control</li>
                <li><strong>Update Scheduling:</strong> Maintenance windows</li>
                <li><strong>Rollback Triggers:</strong> Automatic failure detection</li>
                <li><strong>Monitoring:</strong> Real-time deployment status</li>
              </ul>
            </div>
          </div>
        </section>

        <section>
          <h3>Advanced Security Features</h3>

          <div class="grid grid-3">
            <div class="card">
              <h4>A/B System Updates</h4>
              <ul>
                <li>Dual root filesystem partitions</li>
                <li>Atomic system-wide updates</li>
                <li>Hardware-level rollback</li>
                <li>Zero-downtime updates</li>
              </ul>
            </div>

            <div class="card">
              <h4>Secure Boot Chain</h4>
              <ul>
                <li>Hardware root of trust</li>
                <li>Bootloader verification</li>
                <li>Kernel signature checking</li>
                <li>Application attestation</li>
              </ul>
            </div>

            <div class="card">
              <h4>Delta Updates</h4>
              <ul>
                <li>90% size reduction typical</li>
                <li>Binary-level differences</li>
                <li>Bandwidth optimization</li>
                <li>Faster deployment</li>
              </ul>
            </div>
          </div>
        </section>

        <section>
          <h3>Real-World Deployments</h3>

          <div class="grid grid-3">
            <div class="card">
              <h4>Automotive Sector</h4>
              <p>10,000+ EV charging stations receiving weekly security updates with 99.7% success rate</p>
              <span class="badge badge-success">Production Scale</span>
            </div>
            <div class="card">
              <h4>Industrial IoT</h4>
              <p>50,000+ environmental sensors with automated firmware updates and predictive maintenance</p>
              <span class="badge badge-success">Mission Critical</span>
            </div>
            <div class="card">
              <h4>Healthcare Devices</h4>
              <p>5,000+ patient monitoring devices with zero-downtime updates and regulatory compliance</p>
              <span class="badge badge-success">Safety Critical</span>
            </div>
          </div>
        </section>
      </section>

      <!-- Troubleshooting -->
      <section>
        <h2>Troubleshooting Guide</h2>

        <div class="grid grid-3">
          <div class="card">
            <h3>Update Not Available</h3>
            <h4>Diagnostic Steps</h4>
            <ul>
              <li>Verify device internet connectivity</li>
              <li>Confirm THISTLE_TOKEN environment variable</li>
              <li>Check that <code>trh release</code> completed successfully</li>
              <li>Verify device enrollment in web console</li>
            </ul>
          </div>

          <div class="card">
            <h3>Signature Verification Failed</h3>
            <h4>Common Causes</h4>
            <ul>
              <li>Clock skew between device and server</li>
              <li>Corrupted configuration file</li>
              <li>Network interference during download</li>
              <li>Expired authentication tokens</li>
            </ul>
          </div>

          <div class="card">
            <h3>Application Errors</h3>
            <h4>Debug Commands</h4>
            <ul>
              <li><code>tuc -v</code> for verbose logging</li>
              <li><code>journalctl -f</code> for system logs</li>
              <li>Check file permissions and paths</li>
              <li>Verify GPIO hardware connections</li>
            </ul>
          </div>
        </div>

        <div class="alert alert-info">
          <strong>Support Resources:</strong> Use <code>trh fetch-current</code> to inspect deployed manifests and verify expected file contents and metadata.
        </div>
      </section>

      <!-- Summary -->
      <section>
        <h2>Workshop Summary</h2>
        <p class="lead">Professional OTA infrastructure implemented</p>

        <div class="grid grid-2">
          <div class="card">
            <h3>Security Achievements</h3>
            <ul>
              <li>Cryptographic signing with cloud-based KMS</li>
              <li>Device authentication and enrollment</li>
              <li>Signature verification before installation</li>
              <li>Atomic file operations with rollback safety</li>
            </ul>
          </div>

          <div class="card">
            <h3>Production Capabilities</h3>
            <ul>
              <li>Cloud-based update distribution</li>
              <li>Fleet management and monitoring</li>
              <li>CI/CD integration ready</li>
              <li>Scalable to thousands of devices</li>
            </ul>
          </div>
        </div>

        <div class="alert alert-success">
          <strong>Key Insight:</strong> You have implemented the same security model used by smartphones, automotive systems, and industrial IoT deployments. The LED blink demonstrates the complete secure update pipeline.
        </div>

        <div class="card">
          <h3>Next Steps</h3>
          <ul>
            <li><strong>Explore A/B Updates:</strong> Full system rollback with dual partitions</li>
            <li><strong>Implement Secure Boot:</strong> Hardware-verified boot chain</li>
            <li><strong>CI/CD Integration:</strong> Automate releases from build pipeline</li>
            <li><strong>Device Groups:</strong> Manage staged rollouts across fleet</li>
          </ul>
        </div>
      </section>

      <!-- Thank You -->
      <section class="title-slide">
        <h1>Workshop Complete</h1>
        <p class="subtitle">Professional OTA Updates Implemented</p>

        <div class="alert alert-success" style="max-width: 800px; margin: 2rem auto;">
          <strong>Skills Acquired:</strong> Cryptographic signing, device authentication, secure deployment, fleet management, production security practices
        </div>

        <div class="logos">
          <span class="logo">BeagleBoard.org</span>
          <span class="logo">Thistle Technologies</span>
        </div>

        <p style="margin-top: 2rem; font-size: 1.1rem;">
          <strong>Documentation:</strong> docs.thistle.tech • docs.beagleboard.org<br>
          <strong>Community:</strong> BeagleBoard Discord • Thistle Support Portal<br>
          <strong>Advanced Topics:</strong> Secure Boot OTA Workshop
        </p>

        <div class="alert alert-info" style="max-width: 600px; margin: 2rem auto;">
          <strong>Navigation:</strong> Use arrow keys or press 'S' for detailed speaker notes throughout any section.
        </div>
      </section>

    </div>
  </div>

  <!-- Reveal.js and Plugins -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/notes/notes.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/search/search.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/zoom/zoom.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/highlight/highlight.js"></script>
  <script src="../../framework/codelab-framework.js"></script>

  <script>
    // Initialize Reveal.js with professional settings
    Reveal.initialize({
      hash: true,
      controls: true,
      progress: true,
      center: false,
      slideNumber: 'c/t',
      width: 1280,
      height: 720,
      margin: 0.02,
      plugins: [RevealNotes, RevealSearch, RevealZoom, RevealHighlight],

      // Professional navigation
      keyboard: {
        67: () => { // 'C' key for copy
          const currentSlide = Reveal.getCurrentSlide();
          const firstCodeBlock = currentSlide.querySelector('pre code');
          if (firstCodeBlock && navigator.clipboard) {
            navigator.clipboard.writeText(firstCodeBlock.textContent).then(() => {
              console.log('Code copied to clipboard');
            });
          }
        }
      },

      // Smooth transitions
      transition: 'slide',
      transitionSpeed: 'default',
      backgroundTransition: 'fade'
    });

    // Educational enhancements
    Reveal.addEventListener('ready', () => {
      console.log('🎓 Thistle Professional Codelab Ready');
      console.log('⌨️  Keyboard: C=copy, S=speaker notes, /=search, F=fullscreen');
      console.log('📖 Navigate: ←→ for slides, ↓↑ for sub-slides');
    });

    // Track learning progress
    Reveal.addEventListener('slidechanged', (event) => {
      const slideTitle = event.currentSlide.querySelector('h1, h2, h3');
      if (slideTitle) {
        console.log(`📍 Current: ${slideTitle.textContent}`);
      }
    });
  </script>
</body>
</html>